%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PM's LaTeX Packages for Miscellaneous Documents (v1.0)
% Peter-Michael Osera
% osera@cs.grinnell.edu
%
% PM's .sty file for miscellaneous documents.  Requires:
% + LuaTeX for compilation (unicode support)
% + Pygments for code highlighting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{reading}[%
  2017/08/31 PM's LaTeX Packages for Miscellaneous Documents
]

% Workaround: amsmath must be loaded before unicode-math
\usepackage{amsmath}
\usepackage{amssymb}

%%%%% Fonts %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fontspec}
\usepackage[
  math-style=ISO,
  bold-style=ISO,
  partial=upright,
  nabla=upright
]{unicode-math}
\setmainfont{Libertinus Serif}
\setsansfont{Libertinus Sans}
\setmathfont{Libertinus Math}
\usepackage[english]{babel}

%%%%% General %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage[
  type={CC},
  modifier={by-nc-sa},
  version={4.0},
]{doclicense}

\usepackage{enumitem}
\setlist{itemsep=0pt}

\usepackage{framed}
\usepackage[amsmath, amsthm, thmmarks]{ntheorem}
\usepackage{graphicx}
\usepackage{microtype}
\usepackage{tabularx}
\usepackage{url}
\usepackage[svgnames]{xcolor}
\usepackage{xspace}

%%%%% Plots %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{pgfplots}
\pgfplotsset{compat=1.10}
\usepackage{forest}
\usepackage{pgfplotstable}

%%%%% Drawing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tikz}
\usetikzlibrary{automata, positioning}

%%%%% Page Formatting %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[
  top=1in,
  bottom=1in,
  left=1in,
  right=1in,
  includefoot,
  paperwidth=8.5in,
  paperheight=11in
]{geometry}

\usepackage{fancyhdr}
\setlength{\headheight}{15.2pt}
\pagestyle{fancy}

\fancyhead{}
\fancyfoot{}
\lhead{\emph{\docclass---Daily Exercise \arabic{chapter}---\doctitle}}
\lfoot{\footnotesize\thepage}
\rfoot{\footnotesize\doclicenseText \doclicenseImage[imagewidth=5em]}

%%%%% Code Formatting %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyvrb}
\usepackage[outputdir=latex.out]{minted}

\newminted{latex}{}
\newmintinline{latex}{}

\newminted{java}{}
\newmintinline{java}{}
\newcommand{\ji}[1]{\javainline{#1}}

\newminted{c}{}
\newmintinline{c}{}
\newcommand{\ci}[1]{\cinline{#1}}

\newminted{ocaml}{}
\newmintinline{ocaml}{}
\newcommand{\oi}[1]{\ocamlinline{#1}}

\newminted{html}{}
\newmintinline{html}{}

\newminted{haskell}{}
\newmintinline{haskell}{}
\newcommand{\haski}[1]{\haskellinline{#1}}

\newminted{racket}{}
\newmintinline{racket}{}
\newcommand{\racketi}[1]{\racketinline{#1}}

%%%%% PDF Output %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[pdftex]{hyperref}
\hypersetup{%
  pdftitle={\doctitle},
  pdfauthor={\docauthor},
  bookmarksnumbered=true,
  bookmarksopen=true,
  bookmarksopenlevel=1,
  hidelinks,
  naturalnames=true,
  pdfstartview=Fit,
  pdfpagemode=UseOutlines,
  pdfpagelayout=TwoPageRight,
  unicode=true
}

%%%%% Basic Macros and Definitions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Prose
\newcommand{\eg}{\emph{e.g.\@\xspace}}
\newcommand{\ie}{\emph{i.e.\@\xspace}}
\newcommand{\etc}{\emph{etc.\@\xspace}}
\newcommand{\etal}{\emph{et\ al.\@\xspace}}
\newcommand{\todo}[1]{(\emph{TODO} #1)}

\renewcommand{\chapter}[1]{%
  \stepcounter{chapter}
  \noindent{\huge\textbf{\arabic{chapter}\quad{#1}}}
  \vspace{1em}
}

\newcommand{\turninproblem}{(\ensuremath{\dagger})\xspace}

% General mathematics
\newcommand{\bigO}[1]{\ensuremath{\mathcal{O}(#1)}}

\newtheorem{claim}{Claim}
\newtheorem{invariant}{Invariant}
\newtheorem{defn}{Definition}
\newtheorem{thm}{Theorem}

% Programming languages
\newcommand{\bnfalt}{\;\mathrel{\mid}\;}
\newcommand{\bnfdef}{%
  \mathrel{\!\colon\!\!\colon\!\mathord{=}}%
}

% Exercises
\definecolor{shadecolor}{named}{LightGray}
\newenvironment{exercise}[1]{%
  \begin{shaded}
  \noindent\textbf{Exercise (#1)}\quad
}{\end{shaded}}

\newenvironment{problem}[1]{%
  \noindent\textbf{Problem (#1)}\quad
}{}
